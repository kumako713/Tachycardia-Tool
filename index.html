<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ACLS Timer Tool - Tachycardia</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 20px; }
    .center-row { display: flex; justify-content: center; margin-bottom: 10px; }
    .split-row { display: flex; gap: 30px; justify-content: center; margin-bottom: 10px; }
    .column { display: flex; flex-direction: column; gap: 10px; }
    .section-title { font-size: 24px; font-weight: bold; background: #e53935; color: white; padding: 10px; text-align: center; border-radius: 6px; }
    .toggled { background-color: #555; color: white; text-decoration: line-through; }
    button { padding: 8px 12px; border-radius: 6px; cursor: pointer; border: none; }
    textarea, input { padding: 5px; font-size: 14px; }
    #log { border-top: 1px solid #ccc; padding-top: 10px; margin-top: 20px; }
    #ekgModal { display: none; position: fixed; top: 20%; left: 50%; transform: translateX(-50%); background: white; padding: 20px; border: 2px solid #999; border-radius: 8px; z-index: 9999; }
    #ekgModal button { margin: 5px; }
  </style>
</head>
<body>

<!-- 第一列：標題 -->
<div class="center-row">
  <div class="section-title">ACLS Timer Tool<br>Tachycardia</div>
</div>

<!-- 第二列：現在時間 -->
<div class="center-row"><div id="clock"></div></div>

<!-- 第三列：左欄與右欄 -->
<div class="split-row">
  <!-- 左欄：藥物計次與生命徵象 -->
  <div class="column">
    <div>Adenosine: <span id="adenosineCount">0</span></div>
    <div>Amiodarone: <span id="amioCount">0</span></div>
    <div>Procainamide: <span id="procainamideCount">0</span></div>
    <div>Sync. Shock: <span id="shockCount">0</span></div>
    <label>RR: <input type="text" id="rrInput"></label>
    <label>HR: <input type="text" id="hrInput"></label>
    <label>BP: <input type="text" id="bpSysInput" style="width:40px;"> / <input type="text" id="bpDiaInput" style="width:40px;"></label>
    <label>SpO2: <input type="text" id="spo2Left" style="width:40px;"> → <input type="text" id="spo2Right" style="width:40px;">%</label>
    <label>BT: <input type="text" id="btInput" style="width:60px;">°C</label>
  </div>
  <!-- 右欄：主訴與病史 -->
  <div class="column">
    <label>主訴：<textarea id="chiefComplaint"></textarea></label>
    <label>病史/過敏史：<textarea id="history"></textarea></label>
    <label>其他處置/說明：<textarea id="otherNotes"></textarea></label>
  </div>
</div>

<!-- 第四列 -->
<div class="split-row">
  <!-- 左欄：處置按鈕 -->
  <div class="column">
    <button onclick="giveAdenosine()" id="adenosineBtn">Adenosine</button>
    <button onclick="giveAmiodarone()" id="amioBtn">Amiodarone</button>
    <button onclick="giveProcainamide()" id="procainamideBtn">Procainamide</button>
    <button onclick="recordShock()">⚡️Sync. Shock⚡️</button>
    <button onclick="recordEvent('IV')">I.V.</button>
    <button onclick="recordEvent('Valsalva')">Valsalva</button>
    <button onclick="showEKGModal()">EKG</button>
  </div>
  <!-- 右欄：5H5T -->
  <div class="column">
    <button onclick="toggleMarker(this)">低體溫</button>
    <button onclick="toggleMarker(this)">缺氧</button>
    <button onclick="toggleMarker(this)">低血容</button>
    <button onclick="toggleMarker(this)">酸鹼問題</button>
    <button onclick="toggleMarker(this)">高低血鉀</button>
    <button onclick="toggleMarker(this)">冠狀動脈血栓</button>
    <button onclick="toggleMarker(this)">肺動脈栓塞</button>
    <button onclick="toggleMarker(this)">中毒</button>
    <button onclick="toggleMarker(this)">張力性氣胸</button>
    <button onclick="toggleMarker(this)">心包膜填塞</button>
  </div>
</div>

<!-- 第五列：ISBAR -->
<div class="center-row">
  <button onclick="showISBAR()">ISBAR</button>
</div>

<!-- 第六列：Reset -->
<div class="center-row">
  <button onclick="resetLog()">Reset</button>
</div>

<!-- Modal for EKG -->
<div id="ekgModal">
  <p>請選擇節律：</p>
  <button onclick="selectEKG('VT')">VT</button>
  <button onclick="selectEKG('VF')">VF</button>
  <button onclick="selectEKG('PSVT')">PSVT</button>
  <button onclick="selectEKG('Torsades')">Torsades</button>
  <button onclick="selectEKG('Sinus T')">Sinus T</button>
  <button onclick="selectEKG('AF')">AF</button>
  <button onclick="selectEKG('A-fib')">A-fib</button>
</div>

<!-- Log 區域 -->
<div id="log"></div>

<script>
function updateClock() {
  const now = new Date();
  document.getElementById("clock").innerText = "Current Time: " + now.toLocaleString();
}
setInterval(updateClock, 1000); updateClock();

function recordEvent(event) {
  const now = new Date();
  const timestamp = now.toLocaleTimeString();
  const log = document.getElementById("log");
  const div = document.createElement("div");
  div.textContent = `[${timestamp}] ${event}`;
  log.appendChild(div);
}

function showEKGModal() {
  document.getElementById("ekgModal").style.display = 'block';
}
function selectEKG(type) {
  recordEvent(type);
  document.getElementById("ekgModal").style.display = 'none';
}
function toggleMarker(btn) {
  btn.classList.toggle('toggled');
}
function resetLog() {
  document.getElementById("log").innerHTML = "";
  document.querySelectorAll('input, textarea').forEach(el => el.value = '');
}
function showISBAR() {
  alert("ISBAR 匯出完成！（實際功能請整合原始版本JS）");
}
</script>

</body>
</html>
